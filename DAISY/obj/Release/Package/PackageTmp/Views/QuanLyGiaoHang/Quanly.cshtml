@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="card" style="position: fixed; z-index: 10; top: 5rem; width:54rem; padding:1rem">

    <h4 style="font-weight:700; margin-top:1rem">QUẢN LÝ & THỐNG KÊ ĐẶT HÀNG</h4>
    @if ((string)Session["role"] == "Admin")
    {
        <a href="@Url.Action("Details", "CuaHang", new {@id = Session["IdCuaHang"] })">Trở về</a>
    }
    <hr />

    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Tất cả</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Trong ngày</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">Trong tuần</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-disabled-tab" data-bs-toggle="pill" data-bs-target="#pills-disabled" type="button" role="tab" aria-controls="pills-disabled" aria-selected="false">Trong tháng</button>
        </li>
    </ul>
</div>

    <div style="margin-top:17rem" class="tab-content" id="pills-tabContent">
        @if ((string)Session["role"] != "Admin")
        {
            <div style="width:100%" class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    KHÁCH HÀNG
                                </th>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.AspNetUsers.Name</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>

                                            <a data-bs-toggle="modal" data-bs-target="#_@item.gh.IDGIOHANG" style="text-decoration:none" class="btn btn-warning"><i tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Từ chối giao hàng" class="bi bi-x-square-fill"></i></a>
                                            <a data-bs-toggle="modal" data-bs-target="#_@item.gh.IDGIOHANG@item.gh.IDGIOHANG" style="text-decoration:none" class="btn btn-info"><i tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Bắt đầu giao hàng" class="bi bi-send-fill"></i></a>

                                            <!-- Modal Hủy -->
                                            <div class="modal fade" id="_@item.gh.IDGIOHANG" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Bạn có chắc chắn muốn hủy đơn</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                                            <a href="@Url.Action("HuyQL","QuanLyGiaoHang", new {@id = item.gh.IDGIOHANG})" class="btn btn-danger">Xác nhận</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Modal Giao hàng -->
                                            <div class="modal fade" id="_@item.gh.IDGIOHANG@item.gh.IDGIOHANG" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Xác nhận giao hàng, đơn hàng này bắt đầu giao đến khách hàng</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                                            <a href="@Url.Action("Giaohang","QuanLyGiaoHang", new {@id = item.gh.IDGIOHANG})" class="btn btn-primary">Xác nhận</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                            <a data-bs-toggle="modal" data-bs-target="#a1_@item.gh.IDGIOHANG" style="text-decoration:none" class="btn btn-success"><i tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Đơn hàng đã giao thành công" class="bi bi-send-check-fill"></i></a>
                                            <a data-bs-toggle="modal" data-bs-target="#a2_@item.gh.IDGIOHANG" style="text-decoration:none" class="btn btn-danger"><i tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Đơn hàng đã giao thất bại!" class="bi bi-send-slash-fill"></i></a>
                                            <!-- Modal Giao hàng -->
                                            <div class="modal fade" id="a1_@item.gh.IDGIOHANG" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Xác nhận giao hàng thành công, sản phẩm đã đến tay khách hàng</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                                            <a href="@Url.Action("Thanhcong","QuanLyGiaoHang", new {@id = item.gh.IDGIOHANG})" class="btn btn-success">Xác nhận</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Modal Giao hàng -->
                                            <div class="modal fade" id="a2_@item.gh.IDGIOHANG" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Giao hàng thất bại, hủy bỏ đơn hàng?</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                                            <a href="@Url.Action("HuyQL","QuanLyGiaoHang", new {@id = item.gh.IDGIOHANG})" class="btn btn-danger">Xác nhận</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position:fixed; width:30rem; padding:2rem">
                            <h5 style="color: black; font-weight: 700">TẤT CẢ</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.sl</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.sp</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tien)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @foreach (var item in ViewBag.listkh)
                                {
                                    var tong = 0;
                                    <tr>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                break;
                                            }

                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                break;
                                            }
                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                tong += idem.gh.THANHTIEN;
                                            }
                                            <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                        </td>
                                    </tr>
                                }

                            </table>

                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%" class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in ViewBag.listngay)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position: fixed; z-index: 10; width: 30rem; padding: 2rem; margin-top: 2.5rem">
                            <h5 style="color: black; font-weight: 700">THỐNG KÊ TRONG NGÀY</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.slngay</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.spngay</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tienngay)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @foreach (var item in ViewBag.listkhngay)
                                {
                                    var tong = 0;
                                    <tr>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                break;
                                            }

                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                break;
                                            }
                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                tong += idem.gh.THANHTIEN;
                                            }
                                            <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                        </td>
                                    </tr>
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%" class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in ViewBag.listtuan)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position:fixed; width:30rem; padding:2rem; margin-top:2.5rem">
                            <h5 style="color: black; font-weight: 700">THỐNG KÊ TRONG TUẦN</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.sltuan</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.sptuan</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tientuan)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @if (ViewBag.listkhtuan != null)
                                {
                                    foreach (var item in ViewBag.listkhtuan)
                                    {
                                        var tong = 0;
                                        <tr>
                                            <td>
                                                @foreach (var idem in @item)
                                                {
                                                    <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                    break;
                                                }

                                            </td>
                                            <td>
                                                @foreach (var idem in @item)
                                                {
                                                    <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                    break;
                                                }
                                            </td>
                                            <td>
                                                @foreach (var idem in @item)
                                                {
                                                    tong += idem.gh.THANHTIEN;
                                                }
                                                <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                            </td>
                                        </tr>
                                    }
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%" class="tab-pane fade" id="pills-disabled" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in ViewBag.listthang)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position:fixed; width:30rem; padding:2rem; margin-top:2.5rem">
                            <h5 style="color: black; font-weight: 700">THỐNG KÊ TRONG THÁNG</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.slthang</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.spthang</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tienthang)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @foreach (var item in ViewBag.listkhthang)
                                {
                                    var tong = 0;
                                    <tr>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                break;
                                            }

                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                break;
                                            }
                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                tong += idem.gh.THANHTIEN;
                                            }
                                            <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                        </td>
                                    </tr>
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        }
        else
        {
            <div style="width:100%" class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    KHÁCH HÀNG
                                </th>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.AspNetUsers.Name</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>


                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>

                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position:fixed; width:30rem; padding:2rem">
                            <h5 style="color: black; font-weight: 700">TẤT CẢ</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.sl</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.sp</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tien)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @foreach (var item in ViewBag.listkh)
                                {
                                    var tong = 0;
                                    <tr>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                break;
                                            }

                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                break;
                                            }
                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                tong += idem.gh.THANHTIEN;
                                            }
                                            <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                        </td>
                                    </tr>
                                }

                            </table>

                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%" class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in ViewBag.listngay)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position: fixed; z-index: 10; width: 30rem; padding: 2rem; margin-top: 2.5rem">
                            <h5 style="color: black; font-weight: 700">THỐNG KÊ TRONG NGÀY</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.slngay</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.spngay</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tienngay)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @foreach (var item in ViewBag.listkhngay)
                                {
                                    var tong = 0;
                                    <tr>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                break;
                                            }

                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                break;
                                            }
                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                tong += idem.gh.THANHTIEN;
                                            }
                                            <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                        </td>
                                    </tr>
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%" class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in ViewBag.listtuan)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position:fixed; width:30rem; padding:2rem; margin-top:2.5rem">
                            <h5 style="color: black; font-weight: 700">THỐNG KÊ TRONG TUẦN</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.sltuan</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.sptuan</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tientuan)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @if (ViewBag.listkhtuan != null)
                                {
                                    foreach (var item in ViewBag.listkhtuan)
                                    {
                                        var tong = 0;
                                        <tr>
                                            <td>
                                                @foreach (var idem in @item)
                                                {
                                                    <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                    break;
                                                }

                                            </td>
                                            <td>
                                                @foreach (var idem in @item)
                                                {
                                                    <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                    break;
                                                }
                                            </td>
                                            <td>
                                                @foreach (var idem in @item)
                                                {
                                                    tong += idem.gh.THANHTIEN;
                                                }
                                                <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                            </td>
                                        </tr>
                                    }
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div style="width:100%" class="tab-pane fade" id="pills-disabled" role="tabpanel" aria-labelledby="pills-disabled-tab" tabindex="0">
                <div class="row">
                    <div class="col-8">
                        <table class="table">
                            <tr>
                                <th>
                                    NGÀY ĐẶT
                                </th>
                                <th>
                                    THÀNH TIỀN
                                </th>
                                <th>
                                    THANH TOÁN
                                </th>
                                <th>
                                    TRẠNG THÁI
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in ViewBag.listthang)
                            {
                                <tr>
                                    <td>
                                        <h6 style="font-weight:700">@item.gh.NGAYTAO</h6>
                                    </td>
                                    <td>
                                        <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", item.gh.THANHTIEN)₫</h6>
                                    </td>
                                    <td>
                                        @if (item.gh.THANHTOAN == false)
                                        {
                                            <h6 style="color:red; font-weight:700">Chưa thanh toán</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">Đã thanh toán</h6>
                                        }
                                    </td>
                                    <td>
                                        @if (item.gh.TRANGTHAI == "Chờ xử lý")
                                        {
                                            <h6 style="color:orange; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đang giao hàng")
                                        {
                                            <h6 style="color:dodgerblue; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else if (item.gh.TRANGTHAI == "Đã hủy")
                                        {
                                            <h6 style="color:red; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }
                                        else
                                        {
                                            <h6 style="color:green; font-weight:700">@item.gh.TRANGTHAI</h6>
                                        }

                                    </td>
                                    <td>
                                        <a href="@Url.Action("Chitiet", "GioHangChiTiet", new { @id = item.gh.IDGIOHANG })" class="btn btn-primary" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-content="Chi tiết đơn hàng"><i class="bi bi-info-circle-fill"></i></a>
                                    </td>
                                </tr>
                            }

                        </table>
                    </div>
                    <div class="col-4">
                        <div class="card card-hover translate-middle-top" style="position:fixed; width:30rem; padding:2rem; margin-top:2.5rem">
                            <h5 style="color: black; font-weight: 700">THỐNG KÊ TRONG THÁNG</h5>
                            <h6 style="color: red; font-weight: 700">Số đơn hàng: @ViewBag.slthang</h6>
                            <h6 style="color: dodgerblue; font-weight: 700">Số sản phẩm bán được: @ViewBag.spthang</h6>
                            <h6 style="color: green; font-weight: 700">Tổng danh thu: @String.Format("{0:0,0}", @ViewBag.tienthang)₫</h6>

                            <table class="table">
                                <tr>
                                    <th>
                                        Tên khách hàng
                                    </th>
                                    <th>
                                        Số điện thoại
                                    </th>
                                    <th>
                                        Thành tiền
                                    </th>
                                </tr>

                                @foreach (var item in ViewBag.listkhthang)
                                {
                                    var tong = 0;
                                    <tr>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.Name</h6>
                                                break;
                                            }

                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                <h6 style="font-weight:700">@idem.gh.AspNetUsers.PhoneNumber</h6>
                                                break;
                                            }
                                        </td>
                                        <td>
                                            @foreach (var idem in @item)
                                            {
                                                tong += idem.gh.THANHTIEN;
                                            }
                                            <h6 style="font-weight:700; color:green">@String.Format("{0:0,0}", tong)₫</h6>
                                        </td>
                                    </tr>
                                }

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        }

    </div>



